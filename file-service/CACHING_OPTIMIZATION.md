# –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚úÖ Presigned URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è - –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 50 —Å–µ–∫—É–Ω–¥

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. Presigned URL (—É–ª—É—á—à–µ–Ω–∏–µ)
- ‚úÖ –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–ª—é—á –∫–µ—à–∞ (—É–±—Ä–∞—Ç—å fileId, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ key)
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
- ‚úÖ –°–¥–µ–ª–∞—Ç—å TTL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º

### 2. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–æ–≤ (`getFileById`)
- **TTL**: 5-10 –º–∏–Ω—É—Ç
- **–ö–ª—é—á**: `file:meta:{fileId}`
- **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞

### 3. –°–ø–∏—Å–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ (`getFilesByRoomID`)
- **TTL**: 2-5 –º–∏–Ω—É—Ç
- **–ö–ª—é—á**: `room:files:{roomId}`
- **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (`verifyUserAccess`)
- **TTL**: 1-2 –º–∏–Ω—É—Ç—ã
- **–ö–ª—é—á**: `permission:{userId}:{resourceType}:{resourceId}:{roles}`
- **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è**: —á–µ—Ä–µ–∑ TTL (–ø—Ä–∞–≤–∞ –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ)

### 5. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **TTL**: –º–µ–Ω—å—à–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞
- **–ö–ª—é—á**: `token:validate:{tokenHash}`
- **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è**: —á–µ—Ä–µ–∑ TTL

## –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç
- üìâ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ MongoDB –Ω–∞ 60-80%
- üìâ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Permission Service –Ω–∞ 70-90%
- ‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ 50-200ms –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- üí∞ –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ –≤—ã–∑–æ–≤—ã


